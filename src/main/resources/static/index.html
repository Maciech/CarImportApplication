<!DOCTYPE HTML>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Getting Started: Serving Web Content</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css"
          integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="register_V1.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>

    </style>
</head>
<body>

<form action="/login" method="post" id="registrationForm" onsubmit="event.preventDefault();">
        <h1>Logowanie do systemu</h1>
        <input id="userMail" type="email" placeholder="Adres e-mail" required/><br>
        <input id="userPassword" type="password" placeholder="Hasło" required/><br>
        <label for="default-remember">
            <input type="checkbox" id="default-remember" /> Remember me<br>
        </label>
        <button type="submit" onclick="assignValue()">Zaloguj</button><br>
        <p>Nie masz konta? <a href="register_V1.html">Utwórz je tutaj</a></p>
</form>
<div class="container">
    <div class="frame">
        <p>Witaj! Czy kiedykolwiek marzyłeś o posiadaniu swojego wymarzonego samochodu prosto ze Stanów Zjednoczonych? Teraz to możliwe dzięki naszemu innowacyjnemu systemowi wspomagającemu sprowadzanie samochodów!</p>
        <p>Nasza platforma oferuje Ci łatwy, niezawodny i bezpieczny sposób na sprowadzenie samochodu z USA. Dzięki naszym doświadczonym ekspertom i kompleksowym narzędziom, możemy zapewnić Ci pełne wsparcie na każdym etapie procesu.</p>

    </div>
</div>

<script>

function assignValue() {
  var userMail = document.getElementById("userMail");
  var userPassword = document.getElementById("userPassword");
   console.log("Value: " + userMail + " " + userPassword);

  var login = {
        userMail: userMail.value,
        userPassword: userPassword.value
      };

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "/login", true);
  xhr.setRequestHeader("Content-Type", "application/json");
  xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        console.log("Value sent to the Java backend successfully");
        var response = xhr.responseText; // Odpowiedź z serwera
        console.log("Response: " + response);
        // Wyświetl alert lub wykonaj inne działania na podstawie odpowiedzi
        alert(response);
        // Przekieruj użytkownika do innej strony
        if (response == "Zalogowano pomyślnie"){
        window.location.href = "/welcomePage_V3.html";
        }
      } else {
        console.error("Failed to send value to the Java backend");
      }
    }
  };
  xhr.send(JSON.stringify(login));
  }
  </script>
</body>
</html>