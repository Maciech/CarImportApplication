<!DOCTYPE HTML>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Getting Started: Serving Web Content</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css"
          integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="register_V1.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
// class="pure-form"
<body>
<h1>Logowanie do systemu</h1>
<form action="/login" method="post" id="registrationForm" onsubmit="event.preventDefault();">
        <input id="userMail" type="email"  placeholder="Adres e-mail" required/><br>
        <input id="userPassword" type="password" placeholder="Hasło" required/><br>
        <label for="default-remember">
            <input type="checkbox" id="default-remember" /> Remember me<br>
        </label>
        <button type="submit" onclick="assignValue()">Zaloguj</button><br>
        <p>Nie masz konta? <a href="register_V1.html">Utwórz je tutaj</a></p>
</form>
<script>
window.onload = function() {
            var message = decodeURIComponent('{{ message }}');
            if (message) {
                alert(message);
            }
        };

function assignValue() {
  var userMail = document.getElementById("userMail");
  var userPassword = document.getElementById("userPassword");
   console.log("Value: " + userMail + " " + userPassword);

  var login = {
        userMail: userMail.value,
        userPassword: userPassword.value
      };

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "/login", true);
  xhr.setRequestHeader("Content-Type", "application/json");
  xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        console.log("Value sent to the Java backend successfully");
        var response = xhr.responseText; // Odpowiedź z serwera
        console.log("Response: " + response);
        // Wyświetl alert lub wykonaj inne działania na podstawie odpowiedzi
        alert(response);
        // Przekieruj użytkownika do innej strony
        window.location.href = "/register_V1";
      } else {
        console.error("Failed to send value to the Java backend");
      }
    }
  };
  xhr.send(JSON.stringify(login));
  }
  </script>
</body>
</html>